ポケモン対戦支援システム データベース設計書
1. システム構成図
本システムはMySQLをデータベースとして採用し、アプリケーションサーバーを介してユーザーと対話する構成とする。

[構成の流れ] ユーザー -> アプリケーション -> MySQLデータベース -> 結果をユーザーへ表示

2. データベース設計
正規化の適用
・第1正規形: 繰り返し項目の排除。 ・第2正規形: ポケモンの種族データ（名称、種族値）をspeciesテーブルとして独立させる。 ・第3正規形: タイプ相性をtype_chartマスタとして分離。

ER図の構成要素
・SPECIES (種族): species_id(PK), name, base_speed, type1_id(FK), type2_id(FK) ・MY_POKEMONS (手持ち): id(PK), species_id(FK), nickname, level, individual_speed, created_at ・TYPES (タイプ): type_id(PK) ・TYPE_CHART (相性): id(PK), attacker_type_id(FK), defender_type_id(FK), multiplier

3. テーブル定義
species (種族マスタ)
主キー: species_id

my_pokemons (手持ちポケモン)
主キー: id (自動採番) 外部キー: species_id (speciesテーブルを参照)

4. SQL設計
① 手持ちポケモンの登録 (トランザクション)
START TRANSACTION; INSERT INTO my_pokemons (species_id, nickname, level, individual_speed, created_at) VALUES (25, 'マイピカ', 50, 150, NOW()); COMMIT;

② 最適なポケモンの選出 (Join)
SELECT mp.nickname, s.name AS species_name, mp.individual_speed, tc.multiplier FROM my_pokemons mp JOIN species s ON mp.species_id = s.species_id JOIN type_chart tc ON tc.attacker_type_id = s.type1_id WHERE tc.defender_type_id = 'Fire' AND tc.multiplier >= 2.0 AND mp.individual_speed > 160 ORDER BY tc.multiplier DESC;

③ 副文 (Subquery) の活用
SELECT * FROM my_pokemons WHERE level > (SELECT AVG(level) FROM my_pokemons);

5. 今後の拡張性
・技テーブルの追加による、技単位での相性計算。 ・特性によるタイプ無効化ロジックの実装。
